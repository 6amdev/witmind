# ===========================================
# Witmind Caddyfile
# ===========================================
# Caddy reverse proxy configuration
# Auto SSL via Let's Encrypt
# ===========================================

# Global settings
{
    email admin@witmind.ai
}

# ===========================================
# Mission Control Dashboard
# ===========================================
mc.6amdev.com, mc.{$DOMAIN:localhost} {
    reverse_proxy mc-frontend:80
}

# ===========================================
# Mission Control API
# ===========================================
api.6amdev.com, api.{$DOMAIN:localhost} {
    reverse_proxy mc-backend:4000
}

# ===========================================
# Git Server
# ===========================================
git.6amdev.com, git.{$DOMAIN:localhost} {
    reverse_proxy gitea:3000
}

# ===========================================
# VS Code Server (if running on host)
# ===========================================
code.6amdev.com, code.{$DOMAIN:localhost} {
    reverse_proxy 192.168.80.203:8080
}

# ===========================================
# Local Development (no SSL)
# ===========================================
:80 {
    respond /health 200

    # API
    handle /api/* {
        reverse_proxy mc-backend:4000
    }

    # Frontend
    handle {
        reverse_proxy mc-frontend:80
    }
}
